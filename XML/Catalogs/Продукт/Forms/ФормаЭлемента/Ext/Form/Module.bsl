&НаСервере
// Функция выполняется на сервере, получает ссылку на тип продукта
// и возвращает структуру с результатом проверки и ссылкой на поставщика.
Функция ПолучитьДанныеПоТипуПродуктаНаСервере(ТипПродуктаСсылка)

    // Готовим структуру, которую вернем на клиент
    Результат = Новый Структура;
    Результат.Вставить("ЭтоСобственноеПроизводство", Ложь);
    Результат.Вставить("Поставщик", Неопределено);

    // На сервере мы можем безопасно обратиться к реквизиту "ГотовимСами"
    Если ТипПродуктаСсылка.ГотовимСами Тогда
        Результат.ЭтоСобственноеПроизводство = Истина;
        Результат.Поставщик = Справочники.Поставщик.НайтиПоНаименованию("Собственное производство");
    КонецЕсли;

    Возврат Результат;

КонецФункции


&НаКлиенте
Процедура ТипПродуктаПриИзменении(Элемент)

    // Проверяем, заполнено ли поле "Тип продукта"
    Если ЗначениеЗаполнено(Объект.ТипПродукта) Тогда

        // Вызываем серверную функцию, чтобы получить все нужные данные одним запросом
        ДанныеПоТипу = ПолучитьДанныеПоТипуПродуктаНаСервере(Объект.ТипПродукта);

        // Анализируем результат, который вернул сервер
        Если ДанныеПоТипу.ЭтоСобственноеПроизводство Тогда
            // Если это наше производство, подставляем поставщика
            Объект.Поставщик = ДанныеПоТипу.Поставщик;
        Иначе
            // при смене типа с "собственного" на "покупной" нужно очищать поле Поставщик,
            Объект.Поставщик = Неопределено;
		КонецЕсли;
		
	КонецЕсли;

КонецПроцедуры